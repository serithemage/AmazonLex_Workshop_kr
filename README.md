Amazon Lex 한국어 챗봇 빌드 워크숍

# Amazon Lex 초 간단 설명서(가제)

Amazon Lex 한국어 챗봇 빌드 워크숍에 오신것을 환영합니다. 이 문서는 Amazon Lex로 한국어 챗봇을 만들기 위해 필요한 최소한의 지식들을 빠르게 익힐 수 있도록 작성되었 습니다. Amazon Lex의 개발과 관련한 좀 더 상세한 내용은 [Amazon Lex 개발자 안내서](https://docs.aws.amazon.com/lexv2/latest/dg/what-is.html)를 참조해 주세요.

## Amazon Lex란?

Amazon Lex는 음성과 텍스트를 사용해 대화형 인터페이스를 구축하는 서비스입니다. Alexa에 적용된 것과 같은 대화형 엔진을 사용하는 Amazon Lex는 고품질 음성 인식 및 언어 처리 기능을 제공하여 정교한 자연어 '챗봇'을 기존 또는 새로운 애플리케이션에 추가할 수 있습니다. Amazon Lex에서는 좀 더 간단하게 다중 플랫폼을 개발할 수 있으므로, 사용자가 음성 또는 텍스트 챗봇을 모바일 디바이스 및 여러 채팅 서비스(Facebook Messenger, Slack, Kik, Twilio SMS 등)에 손쉽게 게시할 수 있습니다. AWS Lambda, 및 Amazon CloudWatch와 기본적으로 상호 운용되고 Amazon Cognito, Amazon DynamoDB를 비롯하여 AWS 플랫폼의 다른 많은 서비스와 손쉽게 통합되므로 간편하게 봇을 개발할 수 있습니다.

## Amazon Lex을 사용하기 위해 알아야 하는 용어/개념 설명 

- 봇 - 봇은 피자 주문이나 호텔 예약, 꽃 주문과 같은 작업을 텍스트 또는 음성 인터페이스를 사용하여 자동화 합니다.
  - 역할 - 봇이 동작하기 위해 필요한 권한을 IAM역할을 통해 부여 할 수 있습니다. 
  - 유휴 세션 제한시간 - 세션을 유지하는 기간을 선택합니다. 세션 기간 동안 봇이 동일한 변수로 대화를 진행할 수 있도록 세션 변수를 유지합니다.
  - 정보 수집 및 COPPA(Children's Online Privacy Protection Act) 적용  
    Amazon Lex는 문제 해결 및 서비스 개선을 위해 고객 콘텐츠를 수집합니다. 고객 콘텐츠는 기본적으로 보호되며 Amazon Lex API를 사용하여 개별 고객의 콘텐츠를 삭제할 수 있습니다.  
    Amazon Lex는 네 가지 유형의 콘텐츠를 저장합니다.  
      - 봇을 빌드하고 훈련하는 데 사용되는 샘플 발언
      - 봇과 상호 작용하는 사용자의 고객 발언
      - 사용자가 봇과 상호 작용하는 동안 애플리케이션별 정보를 제공하는 세션 속성
      - 봇에 대한 단일 요청에 적용되는 정보가 포함된 요청 속성
    미국에 기반을 둔 회사가 13세 이하 어린이를 대상으로 한 봇을 제공하고자 하는 경우 콘솔 또는 Amazon Lex API를 사용하여 childDirected필드를 true로 설정하여 봇이 어린이 온라인 개인정보 보호법(COPPA)의 적용을 받는다고 Amazon Lex에 알립니다. childDirected필드가 true로 설정 되면 사용자 발언이 저장되지 않습니다.

  - 언어  
    Amazon Lex 한국어를 포함해 13개 언어를 지원합니다.  Amazon Lex가 지원하는 언어에 대한 정보는 [Amazon Lex가 지원하는 언어](https://docs.aws.amazon.com/lex/latest/dg/how-it-works-language.html)에서 확인하실 수 있습니다. Amazon Lex는 동시에 여러 언어를 사용할 수 있도록 복수의 언어를 음성 상호 작용에 추가하는것이 가능합니다. 
    - 음성 상호 작용  
      봇이 사용자와 상호 작용하는 데 사용하는 텍스트 투 스피치 음성입니다. 한국어의 경우 polly의 한국어 음성인 서연(Seoyeon)이 선택됩니다.

    - 의도 분류 신뢰도 점수 임계값

      사용자가 발언을 하면 Amazon Lex는 자연어 이해(NLU)를 사용하여 사용자의 요청을 이해하고 적절한 의도를 반환합니다. 기본적으로 Amazon Lex는 봇이 정의한 가능성이 가장 높은 의도를 반환합니다.

      Amazon Lex가 반환하는 신뢰도 점수는 0부터 1사이의 숫자로 여러 의도를 비교하기 위한 상대 값 입니다. 이 값은 Amazon Lex가 개선됨에 따라 변경될 수 있습니다.

- 의도(Intent) - 의도는 사용자가 수행하려는 작업을 나타냅니다. 하나 이상의 관련 인텐트를 지원하는 봇을 만듭니다. 예를 들어 피자와 음료를 주문하는 인텐트를 만들 수 있습니다. 각 의도에 대해 다음 필수 정보를 제공합니다.
  - 의도 이름 - 의도를 설명하는 이름입니다. 사용 가능한 문자는 A~Z, a~z, 0~9, -, _입니다.
  - 대화 흐름 - 대화 흐름을 사용하여 봇과 사용자 간의 대화를 시각화할 수 있습니다. 다른 대화 상자 노드를 선택하여 의도 내에서 탐색할 수 있습니다. 의도에 대한 확인 프롬프트 및 종료 응답 등의 다른 대화 상자 노드를 추가하면 흐름이 자동으로 생성됩니다.
  - 샘플 표현 - 이 의도를 호출하기 위해 사용자가 말하거나 입력할 것으로 예상되는 대표적인 구문입니다. Amazon Lex는 샘플과 다를 수 있는 사용자 입력을 해석하기 위해 샘플 표현을 기반으로 추정합니다. 샘플 표현의 우선순위는 의도 분류 출력을 결정하는 데 사용되지 않습니다.
  - 슬롯 - 봇이 의도를 이행하는 데 필요한 정보입니다. 봇이 아래 우선순위에 따라 의도 이행에 필요한 슬롯을 묻는 프롬프트를 표시합니다.
  - 슬롯 유형 - Lex는 도시나 나라 날짜, 숫자등을 입력받기 위한 슬롯을 기본으로 제공합니다. 기본으로 제공되는 슬롯 이외에 직접 [슬롯 유형을 추가](https://docs.aws.amazon.com/lexv2/latest/dg/build-slot-types.html)하는것도 가능합니다.
  - 확인 프롬프트 및 거부 응답 - 프롬프트는 의도를 확인하고자 할 때 이용합니다. 예를들어, 식사를 주문하는 봇을 만들었을때 확인 프롬프트에 "준문을 진행하시겠습니까?"라는 문장을 넣어 의도를 확인토록 할 수 있습니다. 사용자가 확인 프롬프트를 거부하는 경우 lex가 어떤 응답을 해야 하는지도 정할 수 있는데 이를 거부 응답이라고 합니다. 식사 주문을 예로 들자면 "주문을 진행하지 않고 종료합니다."와 같은 문장을 설정할 수 있습니다.
  - Fulfillment - Lambda 함수의 실행이 완료된 경우 사용자에게 이를 알리기 위해 설정합니다. 성공하였을 경우의 문구는 **On successful fulfillment**에 설정하고 실패하는 경우의 문구는 **In case of failure**에 설정합니다.

  - 응답을 닫는 중 - 의도를 닫을 때 lex가 사용자에게 보내는 응답을 정의할 수 있습니다.
  - 코드 후크
    - 초기화 및 검증에 Lambda 함수 사용 - Lambda 함수는 대화의 모든 전환에서 실행됩니다. 이 함수를 사용하여 값을 초기화하거나 사용자 입력을 검증할 수 있습니다.